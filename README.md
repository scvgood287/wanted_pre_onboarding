# wanted_pre_onboarding
## 사용 스택
#### 언어 / 프레임워크 - Javascript / Express
#### ORM / RDBMS - Sequelize / MySQL
## 구현 과정 및 요구 사항 분석
### 구현 과정
우선 요구 사항을 전부 보며 필요한 EndPoint 를 파악해 보았다.
```
1. 채용공고 등록 -> POST /post
2. 채용공고 수정 -> PATCH /post/{postId}
3. 채용공고 삭제 -> DELETE /post/{postId}
4. 채용공고 목록 -> GET /post
4-2. 채용공고 검색 -> GET /post?search={keyword}
5. 채용공고 상세 -> GET /post/{postId}
6. 채용공고 지원 -> POST /post/apply
```
위 EndPoint 에 맞게 Router 세팅 후  
필요 Model 인 회사, 사용자, 채용공고, 지원내역(선택 사항)과,  
각 EndPoint 별 Controller 들의 기초만 세팅해두었다.  

모델 간의 관계를 정의하기 위해 요구 사항을 분석하여 알게 된 사실은 다음과 같다.
```
회사 : 채용공고 = 1 : N (일대다 관계)
사용자 : 지원내역 = 1 : 1 (일대일 관계)
채용공고 : 지원내역 = 1 : N (일대다 관계)
```
위 관계에 맞게 모델 관계 및 컬럼을 정의하였다.

요구 사항 구현을 최대한 빠르게 확인하기 위해 테스트가 필요했다.  
우선 Controller 에 모든 구현을 해두고,  
서버가 실행되면 db 초기화 및 임의의 회사, 사용자 데이터를 db 에 저장하도록 했다.

테스트 완료 후 의도에 맞게 세부 수정, Controller 를 Services 로 분리했다.
### 요구 사항 분석
1. **채용공고를 등록합니다.**
    
    <aside>
    ➡️ 회사는 아래 데이터와 같이 채용공고를 등록합니다.
    
    </aside>
    
    ```json
    Example)
    # 데이터 예시이며, 필드명은 임의로 설정가능합니다.
    {
      "회사_id":회사_id,
      "채용포지션":"백엔드 주니어 개발자",
      "채용보상금":1000000,
      "채용내용":"원티드랩에서 백엔드 주니어 개발자를 채용합니다. 자격요건은..",
      "사용기술":"Python"
    }
    ```
    위 JSON 형식대로 넘어 온다 생각하고, 채용공고 모델 컬럼을 설계 했다.  
    회사_id 는 회사 모델의 외래 키로 설정했다.
    POST 와 201 created, 만들어진 채용공고 정보를 응답으로 넘겨줬다.
    
2. **채용공고를 수정합니다.**
    
    <aside>
    ➡️ 회사는 아래 데이터와 같이 채용공고를 수정합니다. (회사 id 이외 모두 수정 가능합니다.)
    
    </aside>
    
    ```json
    Example)
    # 데이터 예시이며, 필드명은 임의로 설정가능합니다.
    {
      "채용포지션":"백엔드 주니어 개발자",
      "채용보상금":1500000, # 변경됨
      "채용내용":"원티드랩에서 백엔드 주니어 개발자를 '적극' 채용합니다. 자격요건은..", # 변경됨
      "사용기술":"Python"
    }
    
    or
    
    {
      "채용포지션":"백엔드 주니어 개발자",
      "채용보상금":1000000,
      "채용내용":"원티드랩에서 백엔드 주니어 개발자를 채용합니다. 자격요건은..",
      "사용기술":"Django" # 변경됨
    }
    ```
    회사_id 를 수정하려 하면 403 Forbidden 과 함께 경고 메시지를 넘겼다.  
    부분 수정도 가능한 것 같으니 HTTP Method 중 PUT 이 아닌 PATCH 와 204 No Content 를 사용했다.
    
3. **채용공고를 삭제합니다.**
    
    <aside>
    ➡️ DB에서 삭제됩니다.
    
    </aside>  
    간단하게 DELETE 와 204 No Content 를 사용했다.
    
4. **채용공고 목록을 가져옵니다.**
    
    <aside>
    ➡️ 4-1. 사용자는 채용공고 목록을 아래와 같이 확인할 수 있습니다.
    
    </aside>
    
    ```json
    Example)
    [
    	{
    		"채용공고_id": 채용공고_id,
    	  "회사명":"원티드랩",
    	  "국가":"한국",
    	  "지역":"서울",
    	  "채용포지션":"백엔드 주니어 개발자",
    	  "채용보상금":1500000,
    	  "사용기술":"Python"
    	},
    	{
    		"채용공고_id": 채용공고_id,
    	  "회사명":"네이버",
    	  "국가":"한국",
    	  "지역":"판교",
    	  "채용포지션":"Django 백엔드 개발자",
    	  "채용보상금":1000000,
    	  "사용기술":"Django"
    	},
      ...
    ]
    ```
    
    <aside>
    ➡️ 4-2. 채용공고 검색 기능 구현**(선택사항 및 가산점요소).**
    
    </aside>
    
    ```json
    # Example - 1) some/url?**search=원티드**
    [
    	{
    		"채용공고_id": 채용공고_id,
    	  "회사명":"원티드랩",
    	  "국가":"한국",
    	  "지역":"서울",
    	  "채용포지션":"백엔드 주니어 개발자",
    	  "채용보상금":1500000,
    	  "사용기술":"Python"
    	},
    	{
    		"채용공고_id": 채용공고_id,
    	  "회사명":"원티드코리아",
    	  "국가":"한국",
    	  "지역":"부산",
    	  "채용포지션":"프론트엔드 개발자",
    	  "채용보상금":500000,
    	  "사용기술":"javascript"
    	}
    ]
    
    # Example - 2) some/url?**search=Django**
    [
    	{
    		"채용공고_id": 채용공고_id,
    	  "회사명":"네이버",
    	  "국가":"한국",
    	  "지역":"판교",
    	  "채용포지션":"Django 백엔드 개발자",
    	  "채용보상금":1000000,
    	  "사용기술":"Django"
    	},
    	{
    		"채용공고_id": 채용공고_id,
    	  "회사명":"카카오",
    	  "국가":"한국",
    	  "지역":"판교",
    	  "채용포지션":"Django 백엔드 개발자",
    	  "채용보상금":500000,
    	  "사용기술":"Python"
    	}
      ...
    ]
    ```
    우선 모든 채용공고를 가져올 때, 회사 정보를 Join 한 후, 채용내용을 제외하고 가져오도록 했다.  
    Query String 이 없다면 그대로 넘겨주지만,  
    있을 때는 하나라도 Keyword 를 포함하고 있는 채용공고만을 넘겨줬다.
    GET 과 200 OK 를 사용하였다.
    
5. **채용 상세 페이지를 가져옵니다.**
    
    <aside>
    ➡️ 사용자는 채용상세 페이지를 아래와 같이 확인할 수 있습니다.
    
    - “채용내용”이 추가적으로 담겨있음.
    - 해당 회사가 올린 다른 채용공고 가 추가적으로 포함됩니다**(선택사항 및 가산점요소).**
    </aside>
    
    ```json
    Example)
    {
    	"채용공고_id": 채용공고_id,
      "회사명":"원티드랩",
      "국가":"한국",
      "지역":"서울",
      "채용포지션":"백엔드 주니어 개발자",
      "채용보상금":1500000,
      "사용기술":"Python",
    	"채용내용": "원티드랩에서 백엔드 주니어 개발자를 채용합니다. 자격요건은..",
    	"회사가올린다른채용공고":[채용공고_id, 채용공고_id, ..] # id List **(선택사항 및 가산점요소).**
    }
    ```
    채용공고를 가져올 때와 마찬가지로 회사 정보를 Join, 4번에서는 제외 했던 채용내용을 그대로 가져오고,
    채용공고들 중 같은 회사_id 를 갖고 있는 채용공고들의 id 들의 배열을 추가했다.
    GET 과 200 OK 를 사용하였다.
    
6. **사용자는 채용공고에 지원합니다(선택사항 및 가산점요소).**
    
    <aside>
    ➡️ 사용자는 채용공고에 아래와 같이 지원합니다. (가점 요소이며, 필수 구현 요소가 아님)
    
    - 사용자는 1회만 지원 가능합니다.
    </aside>
    
    ```json
    Example)
    {
    	"채용공고_id": 채용공고_id,
      "사용자_id": 사용자_id
    }
    ```
    사용자가 지원을 한 적 있는 지 검색,  
    내역이 있다면 400 Bad Request 와 함께 경고 메시지를 넘기고,  
    없다면 201 created 와 함께 생성된 지원내역을 넘겨줬다.
## 부족한 점
지금까진 NoSQL DB 인 MongoDB 만을 사용해왔기 때문에  
RDBMS 와 Sequelize 를 처음 사용해봤다.  
마침 공부해야겠다는 생각이 있었기에 재미는 있었으나 미숙한 부분이 있었다.  
예를 들어 요구 사항 4-2 에서 검색 키워드를 ORM 선에서 처리 가능할 법도 한데,  
그냥 Javascript 문법으로 해결하였다.
```js
search ? postsInfo.filter(post => Object.values(post).some(value => String(value).includes(search))) : postsInfo
```


추후 도입할 수도 있지만 현재까지는 Typescript 도입을 하지 않은 것도 아쉬운 점인 것 같다.
